"""
HR policy documents for the Financial Institution.

This module contains the hypothetical HR policy documents in Arabic
and functions to populate the database with these documents.
"""

import logging
from hr_policy_chatbot.database import add_policy_document, get_all_policy_documents

# Set up logger
logger = logging.getLogger(__name__)

# Hypothetical HR policy documents in Arabic
HR_POLICIES = [
    {
        "title": "سياسة الإجازات السنوية",
        "content": """
تمنح المؤسسة المالية جميع الموظفين بدوام كامل الحق في إجازة سنوية مدتها 30 يومًا تقويميًا مدفوعة الأجر بالكامل.
يجب تقديم طلبات الإجازة قبل أسبوعين على الأقل من تاريخ بدء الإجازة.
يمكن للموظفين تجميع إجازاتهم السنوية لمدة تصل إلى سنتين، وبعد ذلك تسقط الأيام المتبقية إذا لم يتم استخدامها.
في الحالات الخاصة، يمكن للإدارة الموافقة على طلبات الإجازة المقدمة بمهلة أقصر.
لا يمكن للموظفين أخذ أكثر من 15 يومًا متتاليًا من الإجازة دون موافقة خاصة من مدير القسم.
        """
    },
    {
        "title": "سياسة الإجازات المرضية",
        "content": """
يحق للموظفين الحصول على إجازة مرضية مدفوعة الأجر تصل إلى 15 يومًا في السنة.
للإجازات المرضية التي تزيد عن يومين متتاليين، يجب تقديم شهادة طبية من طبيب معتمد.
في حالة المرض لفترات طويلة، قد يطلب من الموظف إجراء فحص طبي من قبل طبيب تعينه المؤسسة.
يجب إخطار المدير المباشر في أقرب وقت ممكن عند الحاجة إلى إجازة مرضية.
لا يتم ترحيل الإجازات المرضية غير المستخدمة إلى السنة التالية.
        """
    },
    {
        "title": "سياسة ساعات العمل والدوام",
        "content": """
ساعات العمل الرسمية في المؤسسة المالية هي 8 ساعات يوميًا، 5 أيام في الأسبوع، من الأحد إلى الخميس.
يبدأ الدوام الرسمي من الساعة 8:00 صباحًا حتى 4:00 مساءً، مع استراحة غداء لمدة 60 دقيقة.
يمكن للموظفين الاستفادة من نظام الساعات المرنة بموافقة مسبقة من المدير المباشر، بحيث يمكن بدء العمل بين الساعة 7:30 صباحًا و9:00 صباحًا.
يتم تسجيل الحضور والانصراف إلكترونيًا باستخدام نظام البصمة.
قد يُطلب من بعض الموظفين في أقسام معينة العمل لساعات إضافية أو خلال عطلات نهاية الأسبوع حسب متطلبات العمل.
        """
    },
    {
        "title": "سياسة العمل الإضافي",
        "content": """
يتم تعويض العمل الإضافي الذي يزيد عن ساعات العمل المعتادة وفقًا لقانون العمل.
يجب الحصول على موافقة مسبقة من المدير المباشر للعمل الإضافي.
يتم احتساب العمل الإضافي بمعدل 1.5 من الأجر العادي خلال أيام العمل، و2 من الأجر العادي خلال أيام العطل الرسمية.
يمكن للموظفين اختيار التعويض عن العمل الإضافي إما نقدًا أو كإجازة بديلة بموافقة الإدارة.
يتم تسجيل ساعات العمل الإضافي في نظام الحضور والانصراف.
        """
    },
    {
        "title": "سياسة التدريب والتطوير",
        "content": """
تلتزم المؤسسة المالية بتوفير فرص التدريب والتطوير لجميع الموظفين لتعزيز مهاراتهم وكفاءاتهم.
يتم تخصيص ميزانية سنوية للتدريب لكل قسم، ويتم توزيعها حسب احتياجات الموظفين.
يمكن للموظفين الاستفادة من برامج التدريب الداخلية والخارجية بعد موافقة المدير المباشر.
تشجع المؤسسة الموظفين على الحصول على شهادات مهنية في مجالات تخصصهم، وقد تقدم الدعم المالي للحصول عليها.
يجب على الموظفين الذين يحصلون على تدريب مدعوم من المؤسسة الالتزام بالعمل لمدة لا تقل عن سنة بعد انتهاء التدريب.
        """
    },
    {
        "title": "سياسة التقييم والأداء",
        "content": """
يتم إجراء تقييم شامل لأداء الموظفين مرتين في السنة (يونيو وديسمبر).
يعتمد التقييم على أهداف محددة مسبقًا ومؤشرات أداء رئيسية (KPIs) متفق عليها بين الموظف والمدير المباشر.
يتم استخدام نتائج التقييم كأساس للترقيات والزيادات السنوية والمكافآت.
في حالة عدم تحقيق الأهداف المطلوبة، يتم وضع خطة تحسين أداء بالتعاون مع الموظف.
يحق للموظف مناقشة نتيجة التقييم مع المدير المباشر وإمكانية التظلم إلى إدارة الموارد البشرية في حالة عدم الرضا عن التقييم.
        """
    },
    {
        "title": "سياسة الزي الرسمي",
        "content": """
يجب على جميع الموظفين الالتزام بالزي الرسمي خلال ساعات العمل.
بالنسبة للموظفين الذكور: يجب ارتداء بدلة رسمية كاملة (سترة وبنطلون) مع قميص وربطة عنق، أو الزي الوطني التقليدي.
بالنسبة للموظفات الإناث: يجب ارتداء بدلة رسمية أو فستان رسمي بطول مناسب، أو الزي الوطني التقليدي.
يوم الخميس هو يوم الزي غير الرسمي، حيث يمكن للموظفين ارتداء ملابس أكثر راحة مع الحفاظ على المظهر المهني.
يجب على الموظفين الذين يتعاملون مباشرة مع العملاء الالتزام بالزي الرسمي في جميع الأوقات، بما في ذلك أيام الزي غير الرسمي.
        """
    },
    {
        "title": "سياسة المزايا والتأمين الصحي",
        "content": """
توفر المؤسسة المالية تأمينًا صحيًا شاملًا لجميع الموظفين وأفراد أسرهم (الزوج/الزوجة والأبناء حتى سن 21 عامًا).
يغطي التأمين الصحي العلاج في المستشفيات والعيادات المعتمدة بنسبة 100% للحالات الطارئة و80% للحالات العادية.
تشمل المزايا الإضافية: بدل سكن، بدل مواصلات، بدل تعليم للأبناء، وتذاكر سفر سنوية للموظف وعائلته إلى بلد المنشأ.
يحق للموظفين الاشتراك في صندوق التوفير الاختياري، حيث تساهم المؤسسة بنسبة مماثلة لمساهمة الموظف حتى 10% من الراتب الأساسي.
توفر المؤسسة تأمينًا على الحياة وتأمينًا ضد العجز لجميع الموظفين بدون تكلفة إضافية.
        """
    },
    {
        "title": "سياسة الترقيات والتقدم الوظيفي",
        "content": """
تعتمد الترقيات في المؤسسة المالية على الأداء والكفاءة والمؤهلات والخبرة.
يجب أن يكون الموظف قد أمضى على الأقل سنتين في المنصب الحالي قبل النظر في ترقيته.
تتم مراجعة فرص الترقية داخليًا قبل الإعلان عن الوظائف الشاغرة خارجيًا.
يمكن للموظفين التقدم للوظائف الشاغرة داخل المؤسسة بعد إخطار مديرهم المباشر.
يجب أن يكون الموظف قد حصل على تقييم أداء "جيد جدًا" أو أعلى في آخر دورتي تقييم للنظر في ترقيته.
        """
    },
    {
        "title": "مدونة قواعد السلوك وأخلاقيات العمل",
        "content": """
يجب على جميع الموظفين الالتزام بأعلى معايير النزاهة والأمانة والسلوك المهني.
يحظر تمامًا تضارب المصالح، ويجب الإفصاح عن أي تضارب محتمل إلى إدارة الموارد البشرية.
يجب الحفاظ على سرية المعلومات الخاصة بالمؤسسة والعملاء، ويحظر مشاركتها مع أطراف غير مصرح لها.
يمنع قبول الهدايا أو المنافع من العملاء أو الموردين إذا تجاوزت قيمتها الرمزية (500 ريال) دون موافقة مسبقة.
تتبنى المؤسسة سياسة عدم التسامح مطلقًا مع التحرش والتمييز بجميع أشكاله، ويتم التعامل مع الشكاوى بسرية تامة.
        """
    }
]


def populate_database():
    """
    Populate the database with HR policy documents.
    
    Checks if the database already contains policy documents, and if not,
    adds the predefined documents.
    """
    logger.info("Checking if database needs to be populated with policy documents")
    
    # Check if we already have documents in the database
    existing_docs = get_all_policy_documents()
    
    if existing_docs:
        logger.info(f"Database already contains {len(existing_docs)} policy documents")
        return
    
    logger.info("Populating database with predefined HR policy documents")
    
    for policy in HR_POLICIES:
        doc_id = add_policy_document(policy["title"], policy["content"])
        if doc_id:
            logger.debug(f"Added policy document '{policy['title']}' with ID {doc_id}")
        else:
            logger.error(f"Failed to add policy document '{policy['title']}'")
    
    logger.info(f"Successfully added {len(HR_POLICIES)} policy documents to the database")
